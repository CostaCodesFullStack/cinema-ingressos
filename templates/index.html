<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cinema Flask</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <header
      style="
        background: #1f1f1f;
        padding: 15px 0;
        margin-bottom: 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      "
    >
      <nav>
        <a href="{{ url_for('index') }}" style="margin: 0 15px">ğŸ  InÃ­cio</a>
        <a href="{{ url_for('ver_historico') }}" style="margin: 0 15px"
          >ğŸ“Š HistÃ³rico</a
        >
        <a href="{{ url_for('admin') }}" style="margin: 0 15px">âš™ï¸ Admin</a>
      </nav>
    </header>

    <form
      action="{{ url_for('buscar') }}"
      method="get"
      style="max-width: 500px; margin: 20px auto"
    >
      <input
        type="text"
        name="q"
        placeholder="ğŸ” Buscar filme..."
        style="
          width: 100%;
          padding: 15px;
          border-radius: 25px;
          border: 2px solid #333;
          background: #1f1f1f;
          color: white;
        "
      />
    </form>

    <h1>ğŸ¥ Filmes em Cartaz</h1>

    {% if filmes %}
    <div class="lista">
      {% for nome, dados in filmes.items() %}
  <div class="filme-card">
    <h2>
      {{ nome }}
      {% if dados.get('ano', 0) >= 2024 %}
        <span style="background: #4dff4d; color: black; padding: 3px 8px; border-radius: 3px; font-size: 0.7em;">NOVO</span>
      {% endif %}
    </h2>
    <p style="color: #aaa; font-size: 0.85em; margin: 5px 20px">
      {{ dados.get('genero', 'N/A') }} | {{ dados.get('ano', 'N/A') }}
    </p>
    <p>PreÃ§o: R$ {{ "%.2f"|format(dados['preco']) }}</p>
    <p>Ingressos disponÃ­veis: {{ dados['estoque'] }}</p>
    <p>ğŸ”¥ {{ vendas_por_filme.get(nome, 0) }} vendidos</p>
    <a href="{{ url_for('comprar', filme=nome)}}">ğŸŸï¸ Comprar</a>
  </div>
{% endfor %}

    <p style="margin-top: 50px; font-size: 1.2em; color: #aaa">
      ğŸ˜” Nenhum filme encontrado com esse termo.
    </p>

    <a href="{{ url_for('index') }}">â¬… Ver todos os filmes</a>
    {% endif %}

    <footer
      style="
        margin-top: 50px;
        padding: 20px;
        background: #1f1f1f;
        border-top: 2px solid #333;
      "
    >
      <p style="color: #888">ğŸ¬ Sistema de Cinema Flask</p>
      <p style="font-size: 0.9em; color: #666">
        Desenvolvido por CauÃ£ Costa | v1.0.2
      </p>
    </footer>
  </body>
</html>
